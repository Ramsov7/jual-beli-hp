<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ramsov HP Inventory</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; background: #f8f9fa; }
    h1 { text-align: center; margin-bottom: 20px; }
    form { max-width: 500px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); display:none; }
    input, textarea, select, button { width: 100%; margin: 8px 0; padding: 10px; border: 1px solid #ccc; border-radius: 6px; }
    button { background: #007bff; color: white; cursor: pointer; }
    button:hover { background: #0056b3; }
    .list { max-width: 800px; margin: 30px auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .unit { border-bottom: 1px solid #ddd; padding: 10px 0; }
    .status-belum { color: orange; font-weight: bold; }
    .status-selesai { color: green; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Ramsov HP Inventory</h1>  <!-- Step 1: Form Beli -->  <form id="formBeli">
    <h2>Form Beli HP</h2>
    <input type="date" id="tanggalMasuk" required />
    <input type="text" id="tipeVarian" placeholder="Tipe & Varian" required />
    <input type="url" id="lokasiPenjual" placeholder="Link Lokasi Penjual" required />
    <textarea id="cekPenjual" placeholder="Pengecekan dengan penjual"></textarea>
    <textarea id="cekLanjutan" placeholder="Pengecekan lanjutan"></textarea>
    <textarea id="minus" placeholder="Minus ketika ready dijual"></textarea>
    <input type="number" id="hargaBeli" placeholder="Harga Beli" required />
    <button type="submit">Simpan Beli</button>
  </form>  <!-- Step 2: Perbaikan atau Bangkai -->  <form id="formPerbaikan">
    <h2>Perbaikan atau Bangkai</h2>
    <input type="number" id="biayaPerbaikan" placeholder="Total Biaya Perbaikan" />
    <button type="button" onclick="jadikanBangkai()">Jadikan Bangkai</button>
    <button type="button" onclick="lanjutJual()">Lanjut Penjualan</button>
  </form>  <!-- Step 3: Penjualan -->  <form id="formJual">
    <h2>Form Penjualan</h2>
    <input type="date" id="tanggalJual" />
    <input type="url" id="lokasiPembeli" placeholder="Link Lokasi Pembeli" />
    <input type="number" id="hargaJual" placeholder="Harga Jual" />
    <input type="number" id="transport" placeholder="Transport/Bensin" />
    <button type="submit">Simpan Jual</button>
  </form>  <!-- List Data -->  <div class="list">
    <h2>Daftar Unit</h2>
    <div id="unitList"></div>
  </div>  <script>
    let units = [];
    let counter = {}; // untuk menghitung nomor urut per tanggal masuk

    const formBeli = document.getElementById("formBeli");
    const formPerbaikan = document.getElementById("formPerbaikan");
    const formJual = document.getElementById("formJual");
    const unitList = document.getElementById("unitList");

    formBeli.style.display = 'block';

    function generateKodeUnit(tanggal) {
      const tgl = tanggal.replace(/-/g, ""); // yyyyMMdd
      if (!counter[tgl]) counter[tgl] = 0;
      counter[tgl]++;
      const no = String(counter[tgl]).padStart(3, '0');
      return `HP-${tgl}-${no}`;
    }

    formBeli.addEventListener("submit", (e) => {
      e.preventDefault();
      const tanggalMasuk = document.getElementById("tanggalMasuk").value;
      const tipeVarian = document.getElementById("tipeVarian").value;
      const lokasiPenjual = document.getElementById("lokasiPenjual").value;
      const cekPenjual = document.getElementById("cekPenjual").value;
      const cekLanjutan = document.getElementById("cekLanjutan").value;
      const minus = document.getElementById("minus").value;
      const hargaBeli = parseInt(document.getElementById("hargaBeli").value);
      const kodeUnit = generateKodeUnit(tanggalMasuk.split("-").reverse().join(""));

      units.push({
        kodeUnit,
        tanggalMasuk,
        tipeVarian,
        lokasiPenjual,
        cekPenjual,
        cekLanjutan,
        minus,
        hargaBeli,
        status: "Belum Selesai"
      });

      renderUnits();
      formBeli.reset();
      formBeli.style.display = 'none';
      formPerbaikan.style.display = 'block';
    });

    function jadikanBangkai() {
      const unit = units[units.length-1];
      unit.status = "Selesai";
      unit.catatan = "Dijadikan Bangkai (kerugian: Rp" + unit.hargaBeli + ")";
      renderUnits();
      formPerbaikan.style.display = 'none';
      formBeli.style.display = 'block';
    }

    function lanjutJual() {
      const unit = units[units.length-1];
      unit.biayaPerbaikan = parseInt(document.getElementById("biayaPerbaikan").value) || 0;
      renderUnits();
      formPerbaikan.style.display = 'none';
      formJual.style.display = 'block';
    }

    formJual.addEventListener("submit", (e) => {
      e.preventDefault();
      const unit = units[units.length-1];
      unit.tanggalJual = document.getElementById("tanggalJual").value;
      unit.lokasiPembeli = document.getElementById("lokasiPembeli").value;
      unit.hargaJual = parseInt(document.getElementById("hargaJual").value);
      unit.transport = parseInt(document.getElementById("transport").value) || 0;

      const hpp = unit.hargaBeli + (unit.biayaPerbaikan || 0);
      unit.labaKotor = unit.hargaJual - hpp;
      unit.labaUsaha = unit.labaKotor - unit.transport;
      unit.labaBersih = unit.labaUsaha;
      unit.margin = ((unit.labaBersih / unit.hargaJual) * 100).toFixed(2) + "%";
      unit.status = "Selesai";

      renderUnits();
      formJual.reset();
      formJual.style.display = 'none';
      formBeli.style.display = 'block';
    });

    function renderUnits() {
      unitList.innerHTML = "";
      units.forEach((u, i) => {
        unitList.innerHTML += `
          <div class="unit">
            <b>${u.kodeUnit}</b> - ${u.tipeVarian}<br>
            Tanggal Masuk: ${u.tanggalMasuk}<br>
            Harga Beli: Rp${u.hargaBeli}<br>
            Status: <span class="${u.status === 'Selesai' ? 'status-selesai' : 'status-belum'}">${u.status}</span><br>
            ${u.hargaJual ? `Harga Jual: Rp${u.hargaJual}<br> Laba Bersih: Rp${u.labaBersih} (${u.margin})` : ""}
            ${u.catatan ? `<br>Catatan: ${u.catatan}` : ""}
            <button onclick="hapusUnit(${i})">Hapus</button>
          </div>
        `;
      });
    }

    function hapusUnit(i) {
      units.splice(i, 1);
      renderUnits();
    }
  </script></body>
</html>